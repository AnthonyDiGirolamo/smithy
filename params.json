{"name":"Smithy","tagline":"Smithy will help you build, test, and install software with ease.","body":"Software Smithy\r\n===============\r\n\r\nOverview\r\n--------\r\n\r\n`smithy` is a command line software installation/compilation tool that borrows\r\nideas heavily from the excellent [homebrew](http://brew.sh/) package management\r\nsystem for Mac OS X and [SWTools](http://www.olcf.ornl.gov/center-projects/swtools/).\r\n\r\nSmithy is designed to sanely manage many software builds within a\r\nshared [HPC](http://en.wikipedia.org/wiki/High-performance_computing)\r\nLinux environment using [modulefiles](http://modules.sourceforge.net/) to load\r\nsoftware into a user's shell.\r\n\r\nSoftware builds are created with a few conventions:\r\n\r\n- Everything is organized into architecture or OS directores, e.g. redhat6 or sles11\r\n- Prefixes are defined by their name, version, and build name\r\n- Software is loaded into the shell using [modulefiles](http://modules.sourceforge.net/)\r\n- Builds are performed by [build scripts](http://anthonydigirolamo.github.io/smithy/smithy.1.html#BUILD-SCRIPTS) or [formulas](http://anthonydigirolamo.github.io/smithy/smithy.1.html#FORMULAS)\r\n\r\nAs an example:\r\n\r\n    /opt                         Software Root\r\n    ├── redhat6                    OS directory\r\n    |   |\r\n    |   ├── modulefiles                Modules live here\r\n    |   |   ├── git                         Application\r\n    |   |   |   ├── 1.7.8.5                     Versions\r\n    |   |   |   └── 1.8.2.1\r\n    |   |   └── petsc\r\n    |   |       ├── 3.2\r\n    |   |       └── 3.3\r\n    |   |\r\n    |   ├── git                        Application Name\r\n    |   |   ├── 1.7.8.5                    Version\r\n    |   |   |   └── rhel6.4_gnu4.4.7           Build Name\r\n    |   |   └── 1.8.2.1\r\n    |   |       └── rhel6.4_gnu4.4.7\r\n    |   |\r\n    |   └── petsc\r\n    |       ├── 3.2\r\n    |       |   ├── rhel6.4_pgi12.8            Build using PGI 12.8 compiler\r\n    |       |   └── rhel6.4_gnu4.6.3           Build using GNU 4.6.3 compiler\r\n    |       └── 3.3\r\n    |           ├── rhel6.4_pgi12.8\r\n    |           ├── rhel6.4_pgi13.4\r\n    |           └── rhel6.4_gnu4.7.1\r\n    |\r\n    └── sles11                     Another OS directory\r\n        |\r\n        ├── modulefiles\r\n        |   └── git\r\n        |       ├── 1.7.8.5\r\n        |       └── 1.8.2.1\r\n        |\r\n        └── git\r\n            ├── 1.7.9.5\r\n            |   └── sles11.1_gnu4.3.4\r\n            └── 1.8.2.1\r\n                └── sles11.1_gnu4.3.4\r\n\r\nDocumentation\r\n-------------\r\n\r\nLots of information and a tutorial can be found on the manpages:\r\n\r\n* [smithy](http://anthonydigirolamo.github.com/smithy/smithy.1.html)\r\n\r\n* [smithyformula](http://anthonydigirolamo.github.com/smithy/smithyformula.5.html)\r\n\r\nInstallation\r\n------------\r\n\r\nsmithy is available through [rubygems](http://rubygems.org/gems/software_smithy)\r\nso if you already have ruby 1.9.2 or higher available just run:\r\n\r\n    gem install software_smithy\r\n\r\nSet `$SMITHY_CONFIG` to your smithy config file and you're good to go. If you\r\nneed to install ruby or require a multiuser installation read on:\r\n\r\n### Installing ruby\r\n\r\nSmithy requires ruby 1.9.2 or later. Most enterprise Linux distributions only\r\nship version 1.8.7 and you may need build your own copy. The simplest way is\r\nusing the excellent [ruby-build](https://github.com/sstephenson/ruby-build)\r\nscript. As an example, this will install ruby with a prefix of\r\n`/sw/xk6/ruby/1.9.3-p286/sles11.1_gnu4.3.4`\r\n\r\n    curl -L https://github.com/sstephenson/ruby-build/archive/master.zip -o ruby-build.zip\r\n    unzip ruby-build.zip\r\n    cd ruby-build-master\r\n    ./bin/ruby-build -h\r\n    ./bin/ruby-build --definitions\r\n    ./bin/ruby-build 1.9.3-p286 /sw/xk6/ruby/1.9.3-p286/sles11.1_gnu4.3.4\r\n\r\nMany sites use [Environment Modules](http://modules.sourceforge.net/) to allow\r\nusers to load and unload software into their environment. Here is sample\r\nmodulefile for ruby installed in the previous example.\r\n\r\n    #%Module1.0\r\n    proc ModulesHelp { } {\r\n      puts stderr \"Ruby 1.9.3 patch 286\"\r\n      puts stderr \"The gem command will install gems to the ~/.gem directory.\"\r\n    }\r\n    module-whatis \"Ruby 1.9.3-p286\"\r\n\r\n    set PREFIX /sw/xk6/ruby/1.9.3-p286/sles11.1_gnu4.3.4\r\n    prepend-path PATH            $PREFIX/bin\r\n    prepend-path LD_LIBRARY_PATH $PREFIX/lib\r\n    prepend-path MANPATH         $PREFIX/share/man\r\n    setenv       GEM_HOME        $env(HOME)/.gem/ruby/1.9.1\r\n    setenv       GEM_PATH        $env(HOME)/.gem/ruby/1.9.1:$PREFIX/lib/ruby/gems/1.9.1\r\n    prepend-path PATH            $env(HOME)/.gem/ruby/1.9.1/bin:$PREFIX/lib/ruby/gems/1.9.1/bin\r\n\r\nThis file should be saved to `$MODULEPATH/ruby/1.9.3`\r\n\r\n### Installing smithy\r\n\r\n#### Choosting an install location\r\n\r\nThere are two ways to install smithy. The simplest is by simply installing the\r\n`software_smithy` gem. This will install smithy and it's required gems in\r\nyour home directory:\r\n\r\n    gem install software_smithy\r\n\r\nIf you are installing in production for all users you will want to install\r\nsmithy somewhere everyone can access. There are two places you might want to do\r\nthis:\r\n\r\n##### Ruby's default `GEM_PATH`\r\n\r\nIf you installed manually using the examples above, this will be something like\r\n`PREFIX/lib/ruby/gems/1.9.1` This will give access to smithy whenever\r\nruby is loaded into a users environment using the modulefile above. To install\r\nto ruby's default `GEM_PATH` (following the above example):\r\n\r\n    export GEM_HOME=/sw/xk6/ruby/1.9.3-p286/sles11.1_gnu4.3.4/lib/ruby/gems/1.9.1\r\n    gem install software_smithy --no-rdoc --no-ri\r\n\r\n##### A different location of your choosing.\r\n\r\nThis is useful if you want a single smithy install location for more than one\r\ninstall of ruby (typically on separate machines). This method is a bit more\r\ncomplicated and requires users to load smithy into their environment manually in\r\naddition to ruby.\r\n\r\nAssuming you use environment modules you can install smithy to a separate\r\ndirectory e.g. `/sw/tools/smithy` with the\r\n[install\\_smithy](https://github.com/AnthonyDiGirolamo/smithy/blob/master/script/install_smithy)\r\nscript. This will setup a folder containing the smithy gem, a modulefile and a\r\nscript that sets up shell completion. Users can load smithy into their\r\nenvironment by running:\r\n\r\n    source /sw/tools/smithy/environment.sh\r\n\r\n### Loading smithy into your environment\r\n\r\nSmithy depends on a config file to define it's behavior. Once created you can\r\npoint smithy to it's location using the `$SMITHY_CONFIG` environment variable.\r\n\r\nHere is an example config file:\r\n\r\n    ---\r\n    software-root: /sw\r\n    file-group-name: ccsstaff\r\n    hostname-architectures:\r\n      titan-ext: xk6\r\n      titan-login: xk6\r\n      chester-login: xk6\r\n      lens: analysis-x64\r\n      lens-login: analysis-x64\r\n      sith: redhat6\r\n      sith-login: redhat6\r\n      smoky: smoky\r\n      smoky-login: smoky\r\n    web-root: /ccs/proj/ccsstaff/swdesc/data\r\n    descriptions-root: /sw/descriptions\r\n    web-architecture-names:\r\n      xk6: titan\r\n      analysis-x64: lens\r\n      smoky: smoky\r\n    download-cache: /sw/sources\r\n    formula-directories:\r\n    - /sw/tools/smithy/formulas\r\n    global-error-log: /sw/tools/smithy/exceptions.log\r\n\r\nYou may wish to set this using a modulefile or a shell script. Examples are\r\nprovided in\r\n[modulefiles/smithy/1.6](https://github.com/AnthonyDiGirolamo/smithy/blob/master/modulefiles/smithy/1.6.2)\r\nand\r\n[environment.sh](https://github.com/AnthonyDiGirolamo/smithy/blob/master/environment.sh)\r\n\r\nLicense\r\n-------\r\n\r\nSmithy is based on the ideas created in SWTools and uses a BSD license. See\r\n[LICENSE](https://github.com/AnthonyDiGirolamo/smithy/blob/master/LICENSE) for\r\nthe exact text.\r\n\r\nContributing and Support\r\n------------------------\r\n\r\nThe smithy [github repo](https://github.com/AnthonyDiGirolamo/smithy) contains\r\nall development files. Please fork and send me a pull request with any additions\r\nor changes.\r\n\r\nIf you encounter any issues please [open an issue](https://github.com/AnthonyDiGirolamo/smithy/issues) on github. Or send me an email.\r\n\r\n","google":"UA-38580803-1","note":"Don't delete this file! It's used internally to help with page regeneration."}